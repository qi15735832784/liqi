# 项目类型答辩

1、keepalived的功能和作用，以及设计
2、haproxy的作用和功能，以及设计
3、web1和web2 的功能和作用，以及设计(采用nginx实现)
4、GFS的作用和功能，以及设计
5、zabbix的功能和作用，以及设计
6、ELK的功能和作用，以及设计 bbb

## 一、Keepalived

### 功能与作用
- 实现高可用（HA），防止单点故障（如一台负载均衡节点宕机）。
- 使用 VRRP 协议，实现主备切换。

### 设计思路：

- 搭建两台 HA 节点：一主一备。
- keepalived 通过检查 Haproxy 或 Nginx 的状态，控制 VIP 的归属。
- 配置 health check 脚本，实时检测服务健康，自动切换。

### 答辩时讲解思路：

> “为了保障负载均衡服务的高可用，我们引入了 keepalived，实现主备切换。即便主节点宕机，VIP 会漂移到备用节点，业务不中断。”

------

## 二、HAProxy

### 功能与作用：

- 七层/四层负载均衡器。
- 均衡转发来自客户端的请求，提高并发处理能力。

### 设计思路：

- 使用 HTTP 模式，实现基于 URI 的转发。
- 配置健康检查机制，确保请求不会转发到异常节点。
- 后端挂载多个 Web 实例（如 web1、web2）。

### 答辩讲解思路：

> “HAProxy 作为我们架构的流量分发器，它能智能地将请求分发到健康的 web 实例上，有效缓解单点压力并提升系统并发能力。”

------

## 三、web1 和 web2（Nginx 实现）

### 功能与作用：

- 提供静态页面或反向代理动态服务。
- 与 HAProxy 配合提供实际 Web 服务。

### 设计思路：

- 采用 Nginx 作为 Web 服务容器。
- 可以结合 PHP-FPM、Flask、FastCGI 等后端。
- 两台机器提供一样的业务，互为备份。

### 答辩讲解思路：

> “web1 和 web2 使用 nginx 部署，保持配置和内容一致，通过 HAProxy 均衡访问，既实现了扩容也具备了容错能力。”

------

## 四、GFS（Google File System 的实现思路）

### 功能与作用：

- 实现分布式文件存储，多个节点共享文件资源。
- 支撑后端的静态资源/日志存储。

### 设计思路：

- 类似方案如 GlusterFS、Ceph、MooseFS。
- 构建 Master-Metadata + ChunkServer 架构。
- 多副本冗余存储，提高容灾能力。

### 答辩讲解思路：

> “我们借鉴 GFS 的理念，构建了一个分布式存储系统来保存静态资源和日志数据，避免单点磁盘故障造成数据丢失。”

------

## 五、Zabbix

### 功能与作用：

- 企业级监控平台，用于监控服务器、应用、网络设备等。
- 告警推送（邮件、钉钉、飞书等）。

### 设计思路：

- 安装 Zabbix server，配置 agent 和模板。
- 自定义监控项：HAProxy 状态、Web 进程、磁盘 IO、系统负载等。
- 告警媒介对接飞书 Webhook。

### 答辩讲解思路：

> “我们使用 Zabbix 实现了对各个组件的统一监控，包括负载、内存、磁盘、进程等，一旦出现异常，可第一时间通过飞书收到告警。”

------

## 六、ELK（Elasticsearch + Logstash + Kibana）

### 功能与作用：

- 日志采集、存储、分析与可视化。
- 支持对异常事件的快速排查和分析。

### 设计思路：

- Filebeat 采集日志，Logstash 做处理与转发，Elasticsearch 做存储和检索，Kibana 展示。
- 重点采集 nginx、haproxy、系统日志。

### 答辩讲解思路：

> “为了解决日志收集分散、排查效率低的问题，我们部署了 ELK 平台，实现了日志统一采集与可视化展示，大幅提升了运维效率。”





## ✅ **一、整合架构图说明**

我们将包含以下组件：

- **Keepalived**：提供虚拟 IP，高可用主备。
- **HAProxy**：作为反向代理和负载均衡器。
- **Web1/Web2**：Nginx 作为 Web 服务，部署业务页面或应用。
- 可扩展连接：后面可以挂 GFS、Zabbix、ELK。

🔧 架构图说明如下（稍后我可以直接帮你画图）：

![image-20250421164825559](C:\Users\李琦\AppData\Roaming\Typora\typora-user-images\image-20250421164825559.png)



------

## ✅ **二、PPT 大纲内容结构（建议12页）**



| 页面   | 内容标题         | 简要内容                                       |
| ------ | ---------------- | ---------------------------------------------- |
| 第1页  | 项目背景与目标   | 为什么做、解决了什么问题、高可用/高性能的目标  |
| 第2页  | 整体架构图       | 上面这个架构图，配合说明每个组件职责           |
| 第3页  | Keepalived 模块  | 实现 VIP 浮动主备切换，防止 LB 单点失效        |
| 第4页  | HAProxy 模块     | 均衡用户访问请求，智能分发，检测后端存活       |
| 第5页  | Web1 / Web2 模块 | 使用 Nginx 部署业务，支持静态资源和反向代理    |
| 第6页  | 健康检测机制     | Keepalived+HAProxy 检测，HAProxy 监控 Web 节点 |
| 第7页  | 故障切换演示     | VIP 漂移示意图，或者演示截图                   |
| 第8页  | 性能优势展示     | 并发访问测试结果、CPU 负载图等                 |
| 第9页  | 后续扩展设计     | 可接入 GFS、Zabbix、ELK 等模块                 |
| 第10页 | 项目难点         | VIP 漂移调试、HAProxy 日志调试、配置同步       |
| 第11页 | 总结与收获       | 项目成效、收获、问题反思                       |
| 第12页 | Q&A              | 准备应答问题                                   |

------

## ✅ **三、答辩可能会被问到的问题 + 答案建议**



| 问题                                              | 回答建议                                                     |
| ------------------------------------------------- | ------------------------------------------------------------ |
| 为什么选 Keepalived 而不是 Corosync + Pacemaker？ | Keepalived 更轻量、配置简单，满足基本高可用需求，部署快      |
| Keepalived 如何检测 HAProxy 故障？                | 借助 `vrrp_script` + `track_script`，结合 curl 检测 HAProxy 监听端口 |
| 为什么使用 HAProxy 而不是 Nginx 做 LB？           | HAProxy 专业做负载均衡，支持更丰富的健康检查、并发控制能力更强 |
| Web1/Web2 如何保证内容一致？                      | 使用配置同步脚本（rsync/ansible），也可通过 NFS/GFS 挂载统一目录 |
| VIP 会不会有冲突？                                | 配置中确保只有主节点拥有 `state MASTER`，并设置 `nopreempt` 防止抢占 |
| 怎么验证 VIP 是否漂移？                           | 用 `ip a` 和 `ping VIP`，并停掉主机服务看是否切换成功        |
| 如何扩展更多 Web 节点？                           | 只需在 HAProxy 后端配置中新增节点地址即可                    |





# PPT页面内容

**项目答辩 PPT 大纲（含 Keepalived, HAProxy, Web, GFS, Zabbix, ELK 模块）**

**第1页: 项目背景与目标**

- 解决问题：单点故障、负载均衡、无盘断断。
- 项目目标：实现一套高可用、易扩展、可监控、可分析的服务基础架构。

**第2页: 总体架构图**

- 简洁网络抽象图，显示 Keepalived 主备 + HAProxy + Web1/Web2
- 可选补充：接 Zabbix、ELK、GFS

**第3页: Keepalived 模块介绍**

- 功能：通过 VRRP 实现 VIP 漂移、高可用。
- 设计：主备配置、健康检测脚本、不先置配置。

**第4页: HAProxy 模块介绍**

- 功能：负载均衡、后端节点健康检测、支持字符级级级分配。
- 设计：配置第7层 HTTP 分配、后端 web 节点分组。

**第5页: Web1/Web2 (Nginx) 模块介绍**

- 功能：提供静态页面、逆向代理后端。
- 设计：配置精简经过一致、配合分应、可分配应用盘/公共文件系统。

**第6页: GFS / GlusterFS 分布式文件系统**

- 功能：分布式共享文件、多副本备份、免免磁盘单点故障。
- 设计：通过跨机器编组 Volume，两台 web 节点 mount 共享文件目录。

**第7页: Zabbix 监控模块**

- 功能：分布式监控、自动告警、监控模板/定制指标。
- 设计：Agent + Server 构成监控系统，配合脚本和 webhook 接入飞书/钉钉提醒。

**第8页: ELK 日志分析模块**

- 功能：日志收集、处理、存储、可视化分析。
- 设计：Filebeat 采集、Logstash 迁移、Elasticsearch 存储、Kibana 表现。

**第9页: 故障切换演示**

- VIP 漂移流程图，配合实际操作截图
- 点：关闭主机 Keepalived -> 备机接继 VIP

**第10页: 性能测试和效果**

- ApacheBench/自定义脚本进行并发测试
- 效果：应答时间降低、故障时间短。

**第11页: 总结与成效**

- 综合实现高可用 + 分布式 + 监控分析
- 实现效果：应急响应能力增强
- 成长：熟悉互联网基础构成和排错思路

**第12页: Q&A 待回问题**

- 为什么选 HAProxy 而不是 Nginx ？
- VIP 如何无冲突？Keepalived 如何健查？
- ELK 处理量怎样调优？
- Web 应用内容如何保持一致？